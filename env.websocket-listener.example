# ============================================
# WebSocket Listener Service Configuration
# ============================================

# Application Configuration
APP_ENV=production
LOG_LEVEL=info

# ============================================
# Ethereum Configuration
# ============================================

# WebSocket URL - Required for real-time data
ETHEREUM_WS_URL=wss://mainnet.infura.io/ws/v3/YOUR_PROJECT_ID
# RPC URL - Required for block details fetching
ETHEREUM_RPC_URL=https://mainnet.infura.io/v3/YOUR_PROJECT_ID

# Network settings
ETHEREUM_REQUEST_TIMEOUT=120s
ETHEREUM_RATE_LIMIT=1s
ETHEREUM_SKIP_RECEIPTS=true

# ============================================
# MongoDB Configuration
# ============================================

# MongoDB Connection URI
MONGO_URI=mongodb://admin:password@localhost:27018/ethereum_raw_data?authSource=admin&maxPoolSize=20&minPoolSize=5&maxIdleTimeMS=60000&serverSelectionTimeoutMS=10000&socketTimeoutMS=60000&connectTimeoutMS=15000&heartbeatFrequencyMS=30000&retryWrites=true&retryReads=true&maxConnecting=5

# Database settings
MONGO_DATABASE=ethereum_raw_data
MONGO_CONNECT_TIMEOUT=15s
MONGO_MAX_POOL_SIZE=20

# ============================================
# WebSocket Listener Configuration
# ============================================

# Connection settings
WEBSOCKET_RECONNECT_ATTEMPTS=10
WEBSOCKET_RECONNECT_DELAY=3s
WEBSOCKET_PING_INTERVAL=30s
WEBSOCKET_READ_TIMEOUT=60s
WEBSOCKET_WRITE_TIMEOUT=10s

# Data processing settings
WEBSOCKET_BUFFER_SIZE=500
WEBSOCKET_BATCH_SIZE=20
WEBSOCKET_FLUSH_INTERVAL=2s
WEBSOCKET_MAX_RETRIES=5
WEBSOCKET_RETRY_DELAY=1s

# Subscription settings - Choose what to listen for
WEBSOCKET_SUBSCRIBE_TO_BLOCKS=true
WEBSOCKET_SUBSCRIBE_TO_TXS=false
WEBSOCKET_SUBSCRIBE_TO_LOGS=false

# Health monitoring
WEBSOCKET_HEALTH_CHECK_INTERVAL=30s

# ============================================
# NATS Configuration (Optional)
# ============================================

# Enable/disable NATS notifications
NATS_ENABLED=true

# NATS connection settings
NATS_URL=nats://localhost:4222
NATS_STREAM_NAME=ETHEREUM_REALTIME
NATS_SUBJECT_PREFIX=ethereum.realtime

# NATS reliability settings
NATS_CONNECT_TIMEOUT=10s
NATS_RECONNECT_ATTEMPTS=5
NATS_RECONNECT_DELAY=2s
NATS_MAX_PENDING_MESSAGES=2000

# ============================================
# Monitoring Configuration
# ============================================

METRICS_ENABLED=true
HEALTH_CHECK_INTERVAL=30s

# ============================================
# Performance Tuning Examples
# ============================================

# High Volume Setup (>1000 TPS)
# WEBSOCKET_BATCH_SIZE=50
# WEBSOCKET_FLUSH_INTERVAL=1s
# WEBSOCKET_BUFFER_SIZE=1000
# MONGO_MAX_POOL_SIZE=50

# Low Latency Setup
# WEBSOCKET_BATCH_SIZE=5
# WEBSOCKET_FLUSH_INTERVAL=500ms
# WEBSOCKET_BUFFER_SIZE=100

# Memory Constrained Setup
# WEBSOCKET_BATCH_SIZE=10
# WEBSOCKET_BUFFER_SIZE=200
# MONGO_MAX_POOL_SIZE=10

# ============================================
# Network Configuration
# ============================================

# For Testnet (Goerli)
# ETHEREUM_WS_URL=wss://goerli.infura.io/ws/v3/YOUR_PROJECT_ID
# ETHEREUM_RPC_URL=https://goerli.infura.io/v3/YOUR_PROJECT_ID

# For Testnet (Sepolia)
# ETHEREUM_WS_URL=wss://sepolia.infura.io/ws/v3/YOUR_PROJECT_ID
# ETHEREUM_RPC_URL=https://sepolia.infura.io/v3/YOUR_PROJECT_ID

# For Local Node
# ETHEREUM_WS_URL=ws://localhost:8546
# ETHEREUM_RPC_URL=http://localhost:8545

# ============================================
# Alternative Providers
# ============================================

# Alchemy
# ETHEREUM_WS_URL=wss://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY
# ETHEREUM_RPC_URL=https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY

# QuickNode
# ETHEREUM_WS_URL=wss://your-endpoint.quicknode.pro/YOUR_API_KEY/
# ETHEREUM_RPC_URL=https://your-endpoint.quicknode.pro/YOUR_API_KEY/

# ============================================
# Security Notes
# ============================================

# 1. Never commit this file with real API keys
# 2. Use different API keys for different environments
# 3. Monitor API usage and set up alerts
# 4. Rotate API keys regularly
# 5. Use environment-specific MongoDB credentials